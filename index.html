<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Productos - Bsale</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
<style>
  header{
    height: auto;
    z-index: 4;
  }
  main{
    min-height: 100vh;
  }
  .nav-item{
    font-size: 18px;
    text-transform: uppercase;
  }
  .nav-item:hover{
    background-color: gray;
  }
  .nav-item:active{
    background-color: gray;
  }
  .sidebar{
    height: auto;
    margin-top: 5em;
  }
  .card{
    height: 100%;
  }
  .bd-placeholder-img{
    height: 100%;
  }
  
</style>
<body class="d-block">
    <header class="md:p-5 bg-dark text-white position-fixed w-100 mt-0">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="#" class="nav-link px-2 text-secondary">BSALE</a></li>
            </ul>
    
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
              <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
            </form>
    
            <div class="text-end">
            </div>
          </div>
        </div>
    </header>
    <main class="grid grid-cols-12 w-100">
      <aside class="hidden md:flex md:flex-col sidebar bg-gray-400 md:col-span-3 xl:col-span-2 p-4">
          <a href="/" class="">
            <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
            <span class="fs-3">CATEGORIAS</span>
          </a>
          <hr>
          <ul class="nav flex-column mb-auto" id="idCategories">
            <li class="">
              <a href="cat=0" class="nav-link active text-white fw-bolder hover" aria-current="page">
                <svg class="bi me-2" width="16" height="16"><use xlink:href="#home"></use></svg>
                Todos
              </a>
              <hr>
            </li>
          </ul>
          <hr>
      </aside>
      <div class="bg-info flex-shrink-0 p-4 col-span-12 md:col-span-9 xl:col-span-10 bg-white p-5 mt-5">
        <div class="relative inline-block text-right w-100 mt-5">
          <label class="mr-4">Filtrar por: </label>
          <div class="relative inline-block text-right w-auto">
            <div class="flex">
              <button type="button" class="inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500" id="idFilter" aria-expanded="true" aria-haspopup="true">
                Recomendado
                <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
              </button>
            </div>
            <div class="z-10 hidden origin-top-right absolute right-0 mt-1 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu"    aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1" id="idFilter">
              <div class="py-1" role="none">
                <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-0">Recomendado</a>
                <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-0">Por nombre (A-Z)</a>
                <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">Por nombre (Z-A)</a>
                <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-2">Por precio menor a mayor</a>
                <a href="#" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-2">Por precio mayor a menor</a>
              </div>
            </div>
          </div>
          <!-- <div class="relative inline-block text-right">
            <select class="inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500">
              <option> [Selecciona] </option>
              <option value="0"> Todo </option>
              <option value="NameASC"> Por nombre (A-Z) </option>
              <option value="NameDESC"> Por nombre (Z-A) </option>
              <option value="PrecioMenor"> Por precio menor a mayor</option>
              <option value="PrecioMayor"> Por precio menor a mayor</option>
            </select>
          </div> -->
        </div>
        <div class="mt-4 grid grid-cols-1 gap-y-10 gap-x-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:gap-x-8" style="width: 100%; margin-top: 10em;" id="idProducts">
          
        </div>
      </div>
    </main>
    
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    
    <script type="text/javascript">
        function listCategories(api){
          $.ajax({
                type: "GET",
                url: `./categories.json`,
                success: function (data) {
                    $.each(data,(index,cat) => {
                      console.log(cat);
                      $("#idCategories").append(`
                      <li class="nav-item">
                        <a href="#" class="nav-link active text-white fw-bolder hover" aria-current="page">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#home"></use></svg>
                          ${cat.name}
                        </a>
                      </li>
                      `)
                    })
                    
                },
                error: (error) =>{
                    console.log("Hubo un error");
                }
            })
        }
        $(document).ready( function () {
            console.log("HOLA MUNDO")
            var api_product = "http://192.168.1.60:8090/api/product";
            var api_category = "http://192.168.1.60:8090/api/category";

            /* $.getJSON(`${api_product}/`,{},function(data){
		        console.log(data);
            }) */
            listCategories(api_category);
            
            var icon_cart = `
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                <path d="M14 36c-2.21 0-3.98 1.79-3.98 4s1.77 4 3.98 4 4-1.79 4-4-1.79-4-4-4zm-12-32v4h4l7.19 15.17-2.7 
                  4.9c-.31.58-.49 1.23-.49 1.93 0 2.21 1.79 4 4 4h24v-4h-23.15c-.28 0-.5-.22-.5-.5 0-.09.02-.17.06-.24l1.79-3.26h14.9c1.5 
                  0 2.81-.83 3.5-2.06l7.15-12.98c.16-.28.25-.61.25-.96 0-1.11-.9-2-2-2h-29.57l-1.9-4h-6.53zm32 32c-2.21 0-3.98 1.79-3.98 4s1.77 
                  4 3.98 4 4-1.79 4-4-1.79-4-4-4z"/><path fill="none" d="M0 0h48v48h-48z"/>
              </svg>
            `;
            $.ajax({
                type: "GET",
                url: `./products.json`,
                success: function (data) {
                    console.log(data);
                    data.map((pro)=>{
                      $("#idProducts").append(`
                      <div class="group relative bg-gray-50 p-3">
                        <div class="w-auto min-h-80 bg-white aspect-w-1 aspect-h-1 rounded-md overflow-hidden group-hover:opacity-75 lg:h-80 lg:aspect-none">
                          <img src="${pro.urlImage}" alt="${pro.name}" class="w-full h-full object-center object-contain lg:w-full lg:h-full">
                        </div>
                        <div class="mt-4 flex justify-between">
                          <div>
                            <h3 class="text-sm text-gray-700">
                              <a href="#">
                                <span aria-hidden="true" class="absolute inset-0"></span>
                                ${pro.name}
                              </a>
                            </h3>
                            <p class="mt-1 text-sm font-medium text-black">$${pro.price}</p>
                          </div>
                          ${
                            pro.discount > 0 ? '<p class="text-sm font-bold text-red-900">'+ pro.discount+'%</p>' : ''
                          }
                          
                        </div>
                      </div>
                      `);
                    })
                },
                error: (error) =>{
                    console.log("Hubo un error");
                }
            })
        })

    </script>
</body>
</html>