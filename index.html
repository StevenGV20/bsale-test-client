<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Productos - Bsale</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<style>
  .nav-item{
    font-size: 18px;
    text-transform: uppercase;
  }
  .nav-item:hover{
    background-color: gray;
  }
  .nav-item:active{
    background-color: gray;
  }
  .sidebar{
    height: 100vh;
    margin-top: 5em;
  }
  header{
    height: 5em;
    z-index: 1;
  }
</style>
<body class="d-block">
    <header class="p-3 bg-dark text-white position-fixed w-100">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
              <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
            </a>
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
              <li><a href="#" class="nav-link px-2 text-secondary">Home</a></li>
              <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
              <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
              <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
              <li><a href="#" class="nav-link px-2 text-white">About</a></li>
            </ul>
    
            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
              <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
            </form>
    
            <div class="text-end">
              <button type="button" class="btn btn-outline-light me-2">Login</button>
              <button type="button" class="btn btn-warning">Sign-up</button>
            </div>
          </div>
        </div>
    </header>
    <main class="d-flex flex-row">
      <aside class="d-flex flex-column flex-shrink-0 p-3 text-white bg-secondary col-sm-4 col-md-3 col-xl-2 position-fixed sidebar">
          <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
            <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
            <span class="fs-3">CATEGORIAS</span>
          </a>
          <hr>
          <ul class="nav flex-column mb-auto" id="idCategories">
            <li class="">
              <a href="#" class="nav-link active text-white fw-bolder hover" aria-current="page">
                <svg class="bi me-2" width="16" height="16"><use xlink:href="#home"></use></svg>
                Todos
              </a>
              <hr>
            </li>
          </ul>
          <hr>
      </aside>
      <div class="container m-auto bg-info flex-shrink-0">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-xl-4 g-3" style="width: 100%; margin-top: 10em;" id="idProducts">
         
        </div>
      </div>
    </main>
    
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    
    <script type="text/javascript">
        function listCategories(api){
          $.ajax({
                type: "GET",
                url: `./categories.json`,
                success: function (data) {
                    $.each(data,(index,cat) => {
                      console.log(cat);
                      $("#idCategories").append(`
                      <li class="nav-item">
                        <a href="#" class="nav-link active text-white fw-bolder hover" aria-current="page">
                          <svg class="bi me-2" width="16" height="16"><use xlink:href="#home"></use></svg>
                          ${cat.name}
                        </a>
                      </li>
                      `)
                    })
                    
                },
                error: (error) =>{
                    console.log("Hubo un error");
                }
            })
        }
        $(document).ready( function () {
            console.log("HOLA MUNDO")
            var api_product = "http://192.168.1.60:8090/api/product";
            var api_category = "http://192.168.1.60:8090/api/category";

            /* $.getJSON(`${api_product}/`,{},function(data){
		        console.log(data);
            }) */
            listCategories(api_category);
            
            var icon_cart = `
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
                <path d="M14 36c-2.21 0-3.98 1.79-3.98 4s1.77 4 3.98 4 4-1.79 4-4-1.79-4-4-4zm-12-32v4h4l7.19 15.17-2.7 
                  4.9c-.31.58-.49 1.23-.49 1.93 0 2.21 1.79 4 4 4h24v-4h-23.15c-.28 0-.5-.22-.5-.5 0-.09.02-.17.06-.24l1.79-3.26h14.9c1.5 
                  0 2.81-.83 3.5-2.06l7.15-12.98c.16-.28.25-.61.25-.96 0-1.11-.9-2-2-2h-29.57l-1.9-4h-6.53zm32 32c-2.21 0-3.98 1.79-3.98 4s1.77 
                  4 3.98 4 4-1.79 4-4-1.79-4-4-4z"/><path fill="none" d="M0 0h48v48h-48z"/>
              </svg>
            `;
            $.ajax({
                type: "GET",
                url: `./products.json`,
                success: function (data) {
                    console.log(data);
                    data.map((pro)=>{
                      $("#idProducts").append(`
                      <div class="col">
                        <div class="card shadow-sm">
                          <figure class="bd-placeholder-img card-img-top" width="100%" height="225">
                            <img src="${pro.urlImage}" class="m-auto w-100 h-100"/>
                          </figure>
                          <div class="card-body">
                            <p class="card-text">${pro.name}</p>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                              <div class="btn-group">
                                <span>${pro.price}</span>
                              </div>
                              <small class="text-muted">${icon_cart}</small>
                            </div>
                          </div>
                        </div>
                      </div>
                      `);
                    })
                },
                error: (error) =>{
                    console.log("Hubo un error");
                }
            })
        })

    </script>
</body>
</html>